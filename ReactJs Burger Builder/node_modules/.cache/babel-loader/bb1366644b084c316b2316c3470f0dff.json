{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\buinn\\\\Desktop\\\\BurgerProject\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\buinn\\\\Desktop\\\\BurgerProject\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\buinn\\\\Desktop\\\\BurgerProject\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\buinn\\\\Desktop\\\\BurgerProject\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\buinn\\\\Desktop\\\\BurgerProject\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\buinn\\\\Desktop\\\\BurgerProject\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from'react';import Aux from'../../hoc/Auxx/Aux';import Burger from'../../components/Burger/Burger';import BuildControls from'../../components/Burger/BuildControls/BuildControls';import Modal from'../../components/UI/Modal/Modal';import OrderSummary from'../../components/Burger/OrderSummary/OrderSummary';import Spinner from'../../components/UI/Spinner/Spinner';import withErrorHandler from'../../hoc/withErrorHandler/withErrorHandler';import axios from'../../axios-orders';var INGREDIENT_PRICES={salad:0.5,cheese:0.4,meat:1.3,bacon:0.7};var BurgerBuilder=/*#__PURE__*/function(_Component){_inherits(BurgerBuilder,_Component);function BurgerBuilder(){var _getPrototypeOf2;var _this;_classCallCheck(this,BurgerBuilder);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BurgerBuilder)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={ingredients:null,totalPrice:4,purchasable:false,purchasing:false,loading:false,error:false};_this.addIngredientHandler=function(type){var oldCount=_this.state.ingredients[type];var updatedCount=oldCount+1;var updatedIngredients=_objectSpread({},_this.state.ingredients);updatedIngredients[type]=updatedCount;var priceAddition=INGREDIENT_PRICES[type];var oldPrice=_this.state.totalPrice;var newPrice=oldPrice+priceAddition;_this.setState({totalPrice:newPrice,ingredients:updatedIngredients});_this.updatePurchaseState(updatedIngredients);};_this.removeIngredientHandler=function(type){var oldCount=_this.state.ingredients[type];if(oldCount<=0){return;}var updatedCount=oldCount-1;var updatedIngredients=_objectSpread({},_this.state.ingredients);updatedIngredients[type]=updatedCount;var priceDeduction=INGREDIENT_PRICES[type];var oldPrice=_this.state.totalPrice;var newPrice=oldPrice-priceDeduction;_this.setState({totalPrice:newPrice,ingredients:updatedIngredients});_this.updatePurchaseState(updatedIngredients);};_this.purchaseHandler=function(){_this.setState({purchasing:true});};_this.purchaseCancelHandler=function(){_this.setState({purchasing:false});};_this.purchaseContinueHandler=function(){// alert('You continue!');\n_this.setState({loading:true});var order={ingredients:_this.state.ingredients,price:_this.state.totalPrice,customer:{name:'Max Schwarzmüller',address:{street:'Teststreet 1',zipCode:'41351',country:'Germany'},email:'test@test.com'},deliveryMethod:'fastest'};axios.post('/orders.json',order).then(function(response){_this.setState({loading:false,purchasing:false});}).catch(function(error){_this.setState({loading:false,purchasing:false});});};return _this;}_createClass(BurgerBuilder,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('https://react-burger-project-ec804.firebaseio.com/ingredients.json').then(function(response){_this2.setState({ingredients:response.data});}).catch(function(error){_this2.setState({error:true});});}},{key:\"updatePurchaseState\",value:function updatePurchaseState(ingredients){var sum=Object.keys(ingredients).map(function(igKey){return ingredients[igKey];}).reduce(function(sum,el){return sum+el;},0);this.setState({purchasable:sum>0});}},{key:\"render\",value:function render(){var disabledInfo=_objectSpread({},this.state.ingredients);for(var key in disabledInfo){disabledInfo[key]=disabledInfo[key]<=0;}var orderSummary=null;var burger=this.state.error?React.createElement(\"p\",null,\"Ingredients can't be loaded!\"):React.createElement(Spinner,null);if(this.state.ingredients){burger=React.createElement(Aux,null,React.createElement(Burger,{ingredients:this.state.ingredients}),React.createElement(BuildControls,{ingredientAdded:this.addIngredientHandler,ingredientRemoved:this.removeIngredientHandler,disabled:disabledInfo,purchasable:this.state.purchasable,ordered:this.purchaseHandler,price:this.state.totalPrice}));orderSummary=React.createElement(OrderSummary,{ingredients:this.state.ingredients,price:this.state.totalPrice,purchaseCancelled:this.purchaseCancelHandler,purchaseContinued:this.purchaseContinueHandler});}if(this.state.loading){orderSummary=React.createElement(Spinner,null);}// {salad: true, meat: false, ...}\nreturn React.createElement(Aux,null,React.createElement(Modal,{show:this.state.purchasing,modalClosed:this.purchaseCancelHandler},orderSummary),burger);}}]);return BurgerBuilder;}(Component);export default withErrorHandler(BurgerBuilder,axios);","map":{"version":3,"sources":["C:\\Users\\buinn\\Desktop\\BurgerProject\\my-app\\src\\containers\\BurgerBuilder\\BurgerBuilder.js"],"names":["React","Component","Aux","Burger","BuildControls","Modal","OrderSummary","Spinner","withErrorHandler","axios","INGREDIENT_PRICES","salad","cheese","meat","bacon","BurgerBuilder","state","ingredients","totalPrice","purchasable","purchasing","loading","error","addIngredientHandler","type","oldCount","updatedCount","updatedIngredients","priceAddition","oldPrice","newPrice","setState","updatePurchaseState","removeIngredientHandler","priceDeduction","purchaseHandler","purchaseCancelHandler","purchaseContinueHandler","order","price","customer","name","address","street","zipCode","country","email","deliveryMethod","post","then","response","catch","get","data","sum","Object","keys","map","igKey","reduce","el","disabledInfo","key","orderSummary","burger"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport Aux from '../../hoc/Auxx/Aux';\r\nimport Burger from '../../components/Burger/Burger';\r\nimport BuildControls from '../../components/Burger/BuildControls/BuildControls';\r\nimport Modal from '../../components/UI/Modal/Modal';\r\nimport OrderSummary from '../../components/Burger/OrderSummary/OrderSummary';\r\nimport Spinner from '../../components/UI/Spinner/Spinner';\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\nimport axios from '../../axios-orders';\r\n\r\nconst INGREDIENT_PRICES = {\r\n    salad: 0.5,\r\n    cheese: 0.4,\r\n    meat: 1.3,\r\n    bacon: 0.7\r\n};\r\n\r\nclass BurgerBuilder extends Component {\r\n    // constructor(props) {\r\n    //     super(props);\r\n    //     this.state = {...}\r\n    // }\r\n    state = {\r\n        ingredients: null,\r\n        totalPrice: 4,\r\n        purchasable: false,\r\n        purchasing: false,\r\n        loading: false,\r\n        error: false\r\n    }\r\n\r\n    componentDidMount () {\r\n        axios.get( 'https://react-burger-project-ec804.firebaseio.com/ingredients.json' )\r\n            .then( response => {\r\n                this.setState( { ingredients: response.data } );\r\n            } )\r\n            .catch( error => {\r\n                this.setState( { error: true } );\r\n            } );\r\n    }\r\n\r\n    updatePurchaseState ( ingredients ) {\r\n        const sum = Object.keys( ingredients )\r\n            .map( igKey => {\r\n                return ingredients[igKey];\r\n            } )\r\n            .reduce( ( sum, el ) => {\r\n                return sum + el;\r\n            }, 0 );\r\n        this.setState( { purchasable: sum > 0 } );\r\n    }\r\n\r\n    addIngredientHandler = ( type ) => {\r\n        const oldCount = this.state.ingredients[type];\r\n        const updatedCount = oldCount + 1;\r\n        const updatedIngredients = {\r\n            ...this.state.ingredients\r\n        };\r\n        updatedIngredients[type] = updatedCount;\r\n        const priceAddition = INGREDIENT_PRICES[type];\r\n        const oldPrice = this.state.totalPrice;\r\n        const newPrice = oldPrice + priceAddition;\r\n        this.setState( { totalPrice: newPrice, ingredients: updatedIngredients } );\r\n        this.updatePurchaseState( updatedIngredients );\r\n    }\r\n\r\n    removeIngredientHandler = ( type ) => {\r\n        const oldCount = this.state.ingredients[type];\r\n        if ( oldCount <= 0 ) {\r\n            return;\r\n        }\r\n        const updatedCount = oldCount - 1;\r\n        const updatedIngredients = {\r\n            ...this.state.ingredients\r\n        };\r\n        updatedIngredients[type] = updatedCount;\r\n        const priceDeduction = INGREDIENT_PRICES[type];\r\n        const oldPrice = this.state.totalPrice;\r\n        const newPrice = oldPrice - priceDeduction;\r\n        this.setState( { totalPrice: newPrice, ingredients: updatedIngredients } );\r\n        this.updatePurchaseState( updatedIngredients );\r\n    }\r\n\r\n    purchaseHandler = () => {\r\n        this.setState( { purchasing: true } );\r\n    }\r\n\r\n    purchaseCancelHandler = () => {\r\n        this.setState( { purchasing: false } );\r\n    }\r\n\r\n    purchaseContinueHandler = () => {\r\n        // alert('You continue!');\r\n        this.setState( { loading: true } );\r\n        const order = {\r\n            ingredients: this.state.ingredients,\r\n            price: this.state.totalPrice,\r\n            customer: {\r\n                name: 'Max Schwarzmüller',\r\n                address: {\r\n                    street: 'Teststreet 1',\r\n                    zipCode: '41351',\r\n                    country: 'Germany'\r\n                },\r\n                email: 'test@test.com'\r\n            },\r\n            deliveryMethod: 'fastest'\r\n        }\r\n        axios.post( '/orders.json', order )\r\n            .then( response => {\r\n                this.setState( { loading: false, purchasing: false } );\r\n            } )\r\n            .catch( error => {\r\n                this.setState( { loading: false, purchasing: false } );\r\n            } );\r\n    }\r\n\r\n    render () {\r\n        const disabledInfo = {\r\n            ...this.state.ingredients\r\n        };\r\n        for ( let key in disabledInfo ) {\r\n            disabledInfo[key] = disabledInfo[key] <= 0\r\n        }\r\n        let orderSummary = null;\r\n        let burger = this.state.error ? <p>Ingredients can't be loaded!</p> : <Spinner />;\r\n\r\n        if ( this.state.ingredients ) {\r\n            burger = (\r\n                <Aux>\r\n                    <Burger ingredients={this.state.ingredients} />\r\n                    <BuildControls\r\n                        ingredientAdded={this.addIngredientHandler}\r\n                        ingredientRemoved={this.removeIngredientHandler}\r\n                        disabled={disabledInfo}\r\n                        purchasable={this.state.purchasable}\r\n                        ordered={this.purchaseHandler}\r\n                        price={this.state.totalPrice} />\r\n                </Aux>\r\n            );\r\n            orderSummary = <OrderSummary\r\n                ingredients={this.state.ingredients}\r\n                price={this.state.totalPrice}\r\n                purchaseCancelled={this.purchaseCancelHandler}\r\n                purchaseContinued={this.purchaseContinueHandler} />;\r\n        }\r\n        if ( this.state.loading ) {\r\n            orderSummary = <Spinner />;\r\n        }\r\n        // {salad: true, meat: false, ...}\r\n        return (\r\n            <Aux>\r\n                <Modal show={this.state.purchasing} modalClosed={this.purchaseCancelHandler}>\r\n                    {orderSummary}\r\n                </Modal>\r\n                {burger}\r\n            </Aux>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withErrorHandler( BurgerBuilder, axios );"]},"metadata":{},"sourceType":"module"}